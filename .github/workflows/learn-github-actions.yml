name: Build master

on: 
    push:
        branches: ['master']
jobs:
    deps:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v1
        - name: install deps
          run: |
              sudo apt install libasound2-dev mesa-common-dev libx11-dev libxrandr-dev libxi-dev xorg-dev libgl1-mesa-dev libglu1-mesa-dev
              git clone https://github.com/raysan5/raylib.git raylib
              cd raylib
              mkdir build && cd build
              cmake -DBUILD_SHARED_LIBS=ON ..
              make
              sudo make install
    build:
        needs: deps
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v1
        - name: Build
          env:
            CC: clang
          run: make

